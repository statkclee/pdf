---
layout: page
title: "PDFë¥¼ ë°ì´í„°ë¡œ ë³´ëŠ” ì˜¬ë°”ë¥¸ ìì„¸"
subtitle: "ê¸€ê¼´(font)"
author:
- name: "ì´ê´‘ì¶˜"
  affiliation: "[Tidyverse Korea](https://www.facebook.com/groups/tidyverse/)"
date: "`r Sys.Date()`"
tags: ["ë°ì´í„° ê³¼í•™", "Data Science", "ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤", "PDF", "í‘œ", "í…Œì´ë¸”", "table", "OCR"]
output:
  html_document: 
    include:
      after_body: footer.html
      before_body: header.html
    theme: default
    toc: yes
    toc_depth: 2
    toc_float: true
    highlight: tango
    code_folding: show
    number_section: true
    self_contained: false
bibliography: bibliography_pdf.bib
csl: biomed-central.csl
mainfont: NanumGothic
urlcolor: blue
linkcolor: blue
editor_options: 
  chunk_output_type: console
header-includes:
   - \usepackage{gensymb}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning=FALSE,
                      comment="", digits = 3, tidy = FALSE, prompt = FALSE, fig.align = 'center')

```

<iframe width="560" height="315" src="https://www.youtube.com/embed/TBs1abqWpY4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>

</iframe>

# R {#r-device}

`ggplot`ì— í…ìŠ¤íŠ¸ë¥¼ í™”ë©´ì— í‘œí˜„í•˜ëŠ” ê·¸ë˜í”½ ì¥ì¹˜(Graphics Device, GD)ëŠ” 5ê°€ì§€ê°€ ì¡´ì¬í•œë‹¤.

-   `png()`
-   `pdf()`
-   ìŠ¤í¬ë¦° í™”ë©´ : Windows
-   ìŠ¤í¬ë¦° í™”ë©´ : Mac
-   ìŠ¤í¬ë¦° í™”ë©´ : Linux

5ê°€ì§€ ê·¸ë˜í”½ ì¥ì¹˜ëŠ” ì„œë¡œ ë‹¬ë¼ ì •í™•í•œ í…ìŠ¤íŠ¸ë¥¼ í™”ë©´ì´ë‚˜ `png`, `pdf` íŒŒì¼ì´ë‚˜ ì´ë¯¸ì§€ì— ë„£ëŠ” ê²ƒì€ ì‰½ì§€ ì•Šì§€ë§Œ, ë‹¤ìŒ íŒ©í‚¤ì§€ê°€ ê·¸ ì—­í• ì„ ìˆ˜í–‰í•˜ê³  ìˆë‹¤.

-   `showtext`
-   `extrafont`
-   `systemfonts`

<p style="font-family: Nanum Pen Script; font-size:17pt; font-style:italic">

ë‚˜ëˆ”ê³ ë”• í°íŠ¸ í…ŒìŠ¤íŠ¸ ì¤‘ì…ë‹ˆë‹¤.

</p>

```{r}
library(showtext)

extrafont::fonttable()$FamilyName
```

# `font` ìš´ë™ì¥ {#font-playground}

```{r fonttype-face}
library(tidyverse)
library(ragg)
library(systemfonts)

code <- "x <- y != z"
logo <- "twitter"
fallback_text <- "This is English, ì´ê²ƒì€ í•œêµ­ì–´ë‹¤. ã“ã®æ–‡ã¯æ—¥æœ¬èªã§ã™ ğŸš€"
emojis <- "ğŸ‘©ğŸ¾ğŸ’»ğŸ”¥ğŸ“Š"

p <- ggplot() + 
  geom_text(
    aes(x = 0, y = 1, label = code), 
    family = "Fira Code"
  ) + 
  geom_text(
    aes(x = 0, y = 2, label = logo), 
    family = "Font Awesome 5 brands"
  ) + 
  geom_text(
    aes(x = 0, y = 3, label = fallback_text), 
    family = "Font Awesome 5 brands"
  ) + 
  geom_text(
    aes(x = 0, y = 3, label = emojis), 
    family = "Font Awesome 5 brands"
  ) + 
  expand_limits(y = c(0, 5))
p
```

# `typeface` vs `font` {#typeface-vs-font}

`typeface`ëŠ” ì„œì²´ë¡œ ë²ˆì—­ë˜ê³  `font`ëŠ” ê¸€ê¼´ë¡œ ë²ˆì—­ëœë‹¤. í•˜ë‚˜ì˜ `typeface`ì— ë‹¤ìˆ˜ `font`ê°€ í¬í•¨ë  ìˆ˜ ìˆë‹¤. [**íŒ¬ê·¸ë¨(Pangram)**](https://ko.wikipedia.org/wiki/íŒ¬ê·¸ë¨)ì€ 'ëª¨ë“  ê¸€ì'ë¼ëŠ” ëœ»ìœ¼ë¡œ ì£¼ì–´ì§„ ëª¨ë“  ë¬¸ìë¥¼ ì ì–´ë„ í•œ ë²ˆ ì´ìƒ ì‚¬ìš©í•˜ì—¬ ë§Œë“  ë¬¸ì¥ì„ ëœ»í•œë‹¤. íŒ¬ê·¸ë¨ì€ ë¡œë ˜ ì…ìˆ¨ì²˜ëŸ¼ ê¸€ê¼´ ìƒ˜í”Œì„ ë³´ì—¬ì£¼ê±°ë‚˜ ì¥ë¹„ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤. ì˜ì–´ íŒ¬ê·¸ë¨ìœ¼ë¡œ ê°€ì¥ ìœ ëª…í•œ 'The quick brown fox jumps over the lazy dog'ëŠ” 19ì„¸ê¸°ë¶€í„° ì‚¬ìš©ë˜ì–´ ì™”ë‹¤.

## ë¬¸ì„œ - R ë§ˆí¬ë‹¤ìš´ {#typeface-vs-font-rmarkdown}

ì•„ë˜ ì„œì²´(typeface, font family)ëŠ” `Noto Sans CJK KR`ì´ë‚˜ ê¸€ê¼´(font)ì€ í¬ê¸°, êµµê¸°, ìŠ¤íƒ€ì¼ì— ë”°ë¼ ë‹¤ì–‘í•˜ê²Œ í…ìŠ¤íŠ¸ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

::: {.row}
::: {.col-md-6}
**ì„œì²´(typeface, `Noto Sans CJK KR`)**

<p style="font-family: Noto Sans CJK KR; font-size:17pt; font-weight:medium">

ë‹¤ëŒì¥ í—Œ ì³‡ë°”í€´ì— íƒ€ê³ íŒŒ

</p>
:::

::: {.col-md-6}
**ê¸€ê¼´(font)**

<p style="font-family: Noto Sans CJK KR; font-size:17pt; font-weight:100">

ë‹¤ëŒì¥ í—Œ ì³‡ë°”í€´ì— íƒ€ê³ íŒŒ

</p>

<p style="font-family: Noto Sans CJK KR; font-size:17pt; font-style:italic, font-weight:200">

ë‹¤ëŒì¥ í—Œ ì³‡ë°”í€´ì— íƒ€ê³ íŒŒ

</p>

<p style="font-family: Noto Sans CJK KR; font-size:17pt; font-weight:300">

ë‹¤ëŒì¥ í—Œ ì³‡ë°”í€´ì— íƒ€ê³ íŒŒ

</p>

```{=html}
<p style="font-family: Noto Sans CJK KR; font-size:17pt; font-style:italic>
ë‹¤ëŒì¥ í—Œ ì³‡ë°”í€´ì— íƒ€ê³ íŒŒ
</p>

<p style="font-family: Noto Sans CJK KR; font-size:17pt; font-weight:500">
ë‹¤ëŒì¥ í—Œ ì³‡ë°”í€´ì— íƒ€ê³ íŒŒ
</p>
```
<p style="font-family: Noto Sans CJK KR; font-size:17pt; font-weight:700">

ë‹¤ëŒì¥ í—Œ ì³‡ë°”í€´ì— íƒ€ê³ íŒŒ

</p>

<p style="font-family: Noto Sans CJK KR; font-size:17pt; font-weight:900">

ë‹¤ëŒì¥ í—Œ ì³‡ë°”í€´ì— íƒ€ê³ íŒŒ

</p>
:::
:::

Rë§ˆí¬ë‹¤ìš´ì—ì„œ ë‹¤ì–‘í•œ ì„œì²´ë¥¼ ê¸€ê¼´ì„ ë‹¬ë¦¬í•˜ì—¬ í‘œí˜„í•˜ëŠ” ë°©ì‹ì€ `css`ë¥¼ í•´ë‹¹ í…ìŠ¤íŠ¸ì— ë‹¤ìŒê³¼ ê°™ì´ ì ìš©í•˜ëŠ” ê²ƒì´ë‹¤.

```{r css-typeface, eval = FALSE}
<p style="font-family: Noto Sans CJK KR; font-size:17pt; font-style:italic, font-weight:200">
ë‹¤ëŒì¥ í—Œ ì³‡ë°”í€´ì— íƒ€ê³ íŒŒ
</p>

```

## ê·¸ë˜í”„ - `ggplot` {#typeface-vs-font-ggplot}

```{r test-fonts}
code <- "x <- y != z"
logo <- "twitter"
fallback_text <- "This is English, ì´ê²ƒì€ í•œêµ­ì–´ë‹¤. ã“ã®æ–‡ã¯æ—¥æœ¬èªã§ã™ ğŸš€"
emojis <- "ğŸ‘©ğŸ¾ğŸ’»ğŸ”¥ğŸ“Š"
korean_text <- "ë‹¤ëŒì¥ í—Œ ì³‡ë°”í€´ì— íƒ€ê³ íŒŒ"
english_text <- "The quick brown fox jumps over the lazy dog"

ggplot() + 
  geom_text(
    aes(x = 0, y = 1, label = code), 
    family = "Fira Code") + 
  geom_text(
    aes(x = 0, y = 2, label = logo), 
    family = "") + 
  geom_text(
    aes(x = 0, y = 3, label = fallback_text), 
    family = "") + 
  geom_text(
    aes(x = 0, y = 4, label = emojis), 
    family = "") + 
  geom_text(
    aes(x = 0, y = 5, label = korean_text), 
    family = "NanumGothic") + 
  geom_text(
    aes(x = 0, y = 6, label = english_text), 
    family = "") + 
  expand_limits(y = c(0, 5)) +
  theme_void(base_family = 'Open Sans')
  # theme(text = element_text(family = 'Open Sans'))
```

```{r typeface-font}
ggplot() + 
  geom_text(
    aes(x = -0.1, y = 5, label = korean_text), 
    family = "NanumGothic") + 
  geom_text(
    aes(x = 0, y = 2, label = logo), 
    family = "") + 
  geom_text(
    aes(x = 0, y = 3, label = fallback_text), 
    family = "") + 
  geom_text(
    aes(x = 0, y = 4, label = emojis), 
    family = "") + 
  geom_text(
    aes(x = 0, y = 5, label = korean_text), 
    family = "NanumGothic") + 
  geom_text(
    aes(x = 0, y = 6, label = english_text), 
    family = "NanumGothic") + 
  expand_limits(y = c(0, 5)) 
```

## ì„¤ì¹˜ëœ ê¸€ê¼´ í™•ì¸ {#check-fonts}

[`systemfonts`](https://github.com/r-lib/systemfonts) íŒ©í‚¤ì§€ë¥¼ í™œìš©í•˜ì—¬ ë¡œì»¬ ì»´í“¨í„°ì—ì„œ ì„¤ì¹˜ëœ ê¸€ê¼´ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```{r check-fonts}
library(systemfonts)

match_font('NanumGothic')

system_fonts() %>% 
  filter(str_detect(family, "Noto"))
```

"ë‹¤ëŒì¥ í—Œ ì³‡ë°”í€´ì— íƒ€ê³ íŒŒ" ë¬¸ì¥ì„ ê¸€ê¼´ê³¼ êµµê¸°ë¥¼ ë‹¬ë¦¬í•˜ì—¬ `ggplot`ì— ì‹œê°í™”í•´ë³´ì.

```{r how-to-set-default-fonts}
library(extrafont)
# extrafont::font_import(pattern = "NanumBarunGothicBold",  prompt = FALSE)
# extrafont::font_import(pattern = "NanumBarunGothicLight", prompt = FALSE)
loadfonts()

ggplot() + 
  geom_text(
    aes(x = -0.1, y = 5, label = korean_text),
    family = "Noto Sans CJK KR", fontface = "plain", size = 7) + 
  geom_text(
    aes(x = -0.1, y = 4, label = korean_text),
    family = "Noto Sans CJK KR", fontface = "bold", size = 7) + 
  geom_text(
    aes(x = -0.1, y = 3, label = korean_text),
    family = "NanumGothic", fontface = 1.5, size = 7) + 
  geom_text(
    aes(x = -0.1, y = 2, label = korean_text),
    family = "NanumGothic", fontface = 2, size = 7) + 
  labs(title = korean_text) +
  expand_limits(y = c(1, 5))  +
  # theme(text = element_text(face="bold")) +
  theme_gray(base_family = "Noto Sans CJK KR")
```

# ê¸€ê¼´ ì¶œë ¥ [^rewrite-font] {#print-fonts}

[^rewrite-font]: [Cookbook for R >> Graphs >> Fonts](http://www.cookbook-r.com/Graphs/Fonts/)

```{r print-fonts}
library(tidyverse)

fonttable <- tribble(~"Short", ~"Canonical",
                         "mono", "Courier",
                         "sans", "Helvetica",
                         "serif", "Times",
                         "", "AvantGarde",
                         "", "Bookman",
                         "", "Helvetica-Narrow",
                         "", "NewCenturySchoolbook",
                         "", "Palatino",
                         "", "URWGothic",
                         "", "URWBookman",
                         "", "NimbusMon",
                         "URWHelvetica", "NimbusSan",
                         "", "NimbusSanCond",
                         "", "CenturySch",
                         "", "URWPalladio",
                         "URWTimes", "NimbusRom")

fonttable <- fonttable %>% 
  mutate(pos = row_number())

fonttable_tbl <- fonttable %>% 
  pivot_longer(cols = c(Short, Canonical), names_to = "NameType", values_to = "Font")

# Face table
facetable <- tibble ("Face" = c("plain","bold","italic","bold.italic")) %>% 
  mutate(Face = factor(Face, levels = c("plain","bold","italic","bold.italic")))

fullfonts <- merge(fonttable_tbl, facetable)

fullfonts %>% 
  ggplot(aes(x=NameType, y=pos)) +
    geom_text(aes(label=Font, family=Font, fontface=Face)) +
  facet_wrap(~ Face, ncol=2)
```

# ê¸€ê¼´ ë¶„ë¥˜ {#font-classification}

# êµ¬ê¸€ ë…¸í†  í°íŠ¸ {#google-noto-fonts}

## í°íŠ¸ ì„¤ì¹˜ {#google-noto-fonts-install}

Noto í°íŠ¸ëŠ” êµ¬ê¸€ì´ `tofu` ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ ì ì œì‹œí•œ ë¬´ë£Œì˜¤í”ˆ ê¸€ê¼´ì´ë‹¤. ëŒ€í‘œì ìœ¼ë¡œ ë…¸í†  ì‚°ìŠ¤ì™€ ë…¸í†  ì„¸ë¦¬í”„ í•œê¸€ ê¸€ê¼´ì„ ì œê³µí•˜ê³  ìˆì–´ ì´ë¥¼ ì„¤ì¹˜í•˜ì—¬ í™œìš©í•˜ëŠ” ë°©ë²•ì„ ì°¾ì•„ë³´ì.

- [Noto Sans KR](https://fonts.google.com/specimen/Noto+Sans+KR)
- [Noto Serif KR](https://fonts.google.com/specimen/Noto+Serif+KR)

```{r google-noto-fonts}
library(tidyverse)

```

ë¨¼ì € [Google Fonts](https://fonts.google.com/) ì›¹ì‚¬ì´íŠ¸ì—ì„œ í°íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ì•„ ë¡œì»¬ ì»´í“¨í„° ìš´ì˜ì²´ì œì— ì„¤ì¹˜í•œë‹¤.


